# FastAPI核心
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic>=2.8.0  # 新架构需要更高版本
pydantic-settings==2.1.0

# 数据库
sqlalchemy==2.0.23
alembic==1.13.1
asyncpg==0.29.0
psycopg2-binary==2.9.9

# Redis
redis==5.0.1

# 异步任务队列 (Redis作为broker)
celery==5.3.4

# 向量数据库和RAG
qdrant-client==1.7.0
sentence-transformers==2.2.2  # 回退到稳定版本，避免Keras 3问题
numpy>=1.24.0,<2.0.0  # 兼容Python 3.12
scikit-learn>=1.3.0,<1.4.0  # 放宽版本约束
huggingface_hub>=0.15.0,<0.25.0  # 扩大版本范围解决依赖冲突

# 新架构核心依赖
langgraph>=0.0.26
dspy-ai>=2.4.0
llama-index>=0.9.0
litellm>=1.0.0

# 重排序和优化
cohere>=4.0.0

# 自优化框架 (最后开发阶段)
# textgrad>=0.1.0

# LLM服务
openai>=1.6.1  # 放宽版本约束，支持新架构依赖
anthropic==0.8.1
httpx==0.26.0

# 工具库
python-multipart==0.0.6
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-dotenv>=1.0.0  # 放宽版本约束
structlog==23.2.0
pytest~=8.4.1